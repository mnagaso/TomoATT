version : 2

domain :
  min_max_dep : [-10.0, 50.0] # depth in km
  min_max_lat : [33.5,41.5]   # latitude in degree
  min_max_lon : [33,42]   # longitude in degree
  n_rtp : [61,81,91]          # number of nodes

source :
  src_rec_file : 'examples/earthquake_location_test_JC/src_rec_select_multiple.dat' # source receiver file (if found, src_dep_lat_lon is ignored)
  # src_rec_file : 'eg3_地震定位简易测试/src_rec_init_loc_single.dat' # source receiver file (if found, src_dep_lat_lon is ignored)
  swap_src_rec : 1                   # swap source and receiver (1: yes, 0: no)

model :
  init_model_path : 'examples/earthquake_location_test_JC/layer_model_init_N61_81_91.h5' # path to initial model file (ignored if init_model_type is '1d_*')

inversion :
  run_mode : 3 # 0 for forward simulation only, 1 for inversion, 3 for location
  max_iterations_inv : 1  # maximum number of inversion iterations
  step_size : 0.02  # step size for inversion
  step_size_decay : 0.9   # if objective function increase, step size -> step size * step_size_decay. default: 0.9

  output_dir : 'examples/earthquake_location_test_JC/OUTPUT_FILES_test1'   # default: "./OUTPUT_FILES/"

  # parameters for multiparametric inversion
  n_inversion_grid : 5  # number of inversion grid sets
  n_inv_dep_lat_lon : [10,10,10] # number of the base inversion grid points
  min_max_dep_inv : [-5.0, 35.0] # depth in km with R = 6371.0
  min_max_lat_inv : [35.5,40.5] # latitude in degree
  min_max_lon_inv : [35.5,41.5] # longitude in degree

  # (joint inversion) global weight of different types of data
  abs_time_local_weight : 1.0       # weight of absolute traveltime data for local earthquake,                        default: 1.0
  cr_dif_time_local_weight : 1.0    # weight of common receiver differential traveltime data for local earthquake,    default: 1.0
  cs_dif_time_local_weight : 1.0    # weight of common source differential traveltime data for local earthquake,      default: 1.0    (not ready)
  teleseismic_weight : 1.0          # weight of teleseismic data                                                      default: 1.0    (not ready)
  is_balance_data_misfit : 1        # add the weight to normalize the initial objective function of different types of data. 1 for yes and 0 for no           default: 0

  # (location)
  step_length_src_reloc : 0.2 # step size for location
  step_length_decay : 0.5     # if objective function increase, step size -> step size * step_length_decay. default: 0.9     
  max_change_dep_lat_lon : [10.0, 0.2, 0.2]        # the change of dep,lat,lon do not exceed max_change (km)
  tol_gradient : 0.01          # the threshold of the norm of gradient to stop relocation

  is_ortime_local_search : 0        # 0 for global search origin time; 1 for local seach origin time
  ref_ortime_change : 10.0          # kernel =   K_t/ref_ortime_change (only for is_ortime_local_search : 1)
  max_change_ortime : 0.1           # the change of ortime do not exceed max_change (only for is_ortime_local_search : 1)  
  step_length_ortime_rescale : 0.1  # step size of ortime is :  step_length_src_reloc * step_length_ortime_rescale  

parallel :
  n_sims : 8         # number of simultaneous run
  ndiv_rtp : [1,1,1] # number of subdomains
  nproc_sub : 1      # number of subprocess used for each subdomain

calculation :
  convergence_tolerance : 1e-5
  max_iterations : 500 # max itertions for forward simulation
  stencil_order : 1 # 1 or 3
  stencil_type : 1
  sweep_type : 0    # 0: legacy, 1: cuthill-mckee with shm parallelization
  output_file_format : 0 # 0: hdf5, 1: ascii

output_setting :
  is_output_source_field : 0      # output the calculated field of all sources                            1 for yes; 0 for no;  default: 1
  is_verbose_output : 0           # output internal parameters, if no, only model parameters are out.     1 for yes; 0 for no;  default: 0
  is_output_model_dat : 1         # output model_parameters_inv_0000.dat or not.                          1 for yes; 0 for no;  default: 1

